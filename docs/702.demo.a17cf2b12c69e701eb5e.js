(()=>{"use strict";var r={403:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"];e.decode83=function(r){for(var e=0,a=0;a<r.length;a++){var o=r[a];e=83*e+t.indexOf(o)}return e},e.encode83=function(r,e){for(var a="",o=1;o<=e;o++){var n=Math.floor(r)/Math.pow(83,e-o)%83;a+=t[Math.floor(n)]}return a}},55:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=t(403),o=t(96),n=t(795),i=function(r){if(!r||r.length<6)throw new n.ValidationError("The blurhash string must be at least 6 characters");var e=a.decode83(r[0]),t=Math.floor(e/9)+1,o=e%9+1;if(r.length!==4+2*o*t)throw new n.ValidationError("blurhash length mismatch: length is "+r.length+" but it should be "+(4+2*o*t))};e.isBlurhashValid=function(r){try{i(r)}catch(r){return{result:!1,errorReason:r.message}}return{result:!0}};var s=function(r){var e=r>>16,t=r>>8&255,a=255&r;return[o.sRGBToLinear(e),o.sRGBToLinear(t),o.sRGBToLinear(a)]},h=function(r,e){var t=Math.floor(r/361),a=Math.floor(r/19)%19,n=r%19;return[o.signPow((t-9)/9,2)*e,o.signPow((a-9)/9,2)*e,o.signPow((n-9)/9,2)*e]};e.default=function(r,e,t,n){i(r),n|=1;for(var u=a.decode83(r[0]),c=Math.floor(u/9)+1,l=u%9+1,f=(a.decode83(r[1])+1)/166,d=new Array(l*c),v=0;v<d.length;v++)if(0===v){var M=a.decode83(r.substring(2,6));d[v]=s(M)}else M=a.decode83(r.substring(4+2*v,6+2*v)),d[v]=h(M,f*n);for(var p=4*e,g=new Uint8ClampedArray(p*t),w=0;w<t;w++)for(var m=0;m<e;m++){for(var y=0,b=0,_=0,P=0;P<c;P++)for(v=0;v<l;v++){var B=Math.cos(Math.PI*m*v/e)*Math.cos(Math.PI*w*P/t),x=d[v+P*l];y+=x[0]*B,b+=x[1]*B,_+=x[2]*B}var G=o.linearTosRGB(y),R=o.linearTosRGB(b),O=o.linearTosRGB(_);g[4*m+0+w*p]=G,g[4*m+1+w*p]=R,g[4*m+2+w*p]=O,g[4*m+3+w*p]=255}return g}},796:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=t(403),o=t(96),n=t(795);e.default=function(r,e,t,i,s){if(i<1||i>9||s<1||s>9)throw new n.ValidationError("BlurHash must have between 1 and 9 components");if(e*t*4!==r.length)throw new n.ValidationError("Width and height must match the pixels array");for(var h=[],u=function(a){for(var n=function(n){var i=0==n&&0==a?1:2,s=function(r,e,t,a){for(var n=0,i=0,s=0,h=4*e,u=0;u<e;u++)for(var c=0;c<t;c++){var l=a(u,c);n+=l*o.sRGBToLinear(r[4*u+0+c*h]),i+=l*o.sRGBToLinear(r[4*u+1+c*h]),s+=l*o.sRGBToLinear(r[4*u+2+c*h])}var f=1/(e*t);return[n*f,i*f,s*f]}(r,e,t,(function(r,o){return i*Math.cos(Math.PI*n*r/e)*Math.cos(Math.PI*a*o/t)}));h.push(s)},s=0;s<i;s++)n(s)},c=0;c<s;c++)u(c);var l,f,d=h[0],v=h.slice(1),M="",p=i-1+9*(s-1);if(M+=a.encode83(p,1),v.length>0){var g=Math.max.apply(Math,v.map((function(r){return Math.max.apply(Math,r)}))),w=Math.floor(Math.max(0,Math.min(82,Math.floor(166*g-.5))));l=(w+1)/166,M+=a.encode83(w,1)}else l=1,M+=a.encode83(0,1);return M+=a.encode83((f=d,(o.linearTosRGB(f[0])<<16)+(o.linearTosRGB(f[1])<<8)+o.linearTosRGB(f[2])),4),v.forEach((function(r){M+=a.encode83(function(r,e){return 19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[0]/e,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[1]/e,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[2]/e,.5)+9.5))))}(r,l),2)})),M}},795:function(r,e){var t,a=this&&this.__extends||(t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},t(r,e)},function(r,e){function a(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(r){function e(e){var t=r.call(this,e)||this;return t.name="ValidationError",t.message=e,t}return a(e,r),e}(Error);e.ValidationError=o},60:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=t(55);e.decode=a.default,e.isBlurhashValid=a.isBlurhashValid;var o=t(796);e.encode=o.default,function(r){for(var t in r)e.hasOwnProperty(t)||(e[t]=r[t])}(t(795))},96:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sRGBToLinear=function(r){var e=r/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},e.linearTosRGB=function(r){var e=Math.max(0,Math.min(1,r));return e<=.0031308?Math.round(12.92*e*255+.5):Math.round(255*(1.055*Math.pow(e,1/2.4)-.055)+.5)},e.sign=function(r){return r<0?-1:1},e.signPow=function(r,t){return e.sign(r)*Math.pow(Math.abs(r),t)}},702:(r,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const o=a(60),n={};self.onmessage=async({data:r})=>{let{hash:e,width:t,height:a,xCount:i,yCount:s,punch:h,id:u}=r;r.canvas&&(n[u]=new WeakRef(r.canvas));const c=n[u]?.deref();if(!c)return;c.width=t||c.width,c.height=a||c.height;const l=c.getContext("2d"),f=(0,o.decode)(e,i,s,h),d=l.createImageData(i,s);d.data.set(f);const v=await createImageBitmap(d,0,0,i,s);l.drawImage(v,0,0,c.width,c.height)},function(){var r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(r){var a=void 0!==t?t:e;if(a)if("function"!=typeof a){for(var o in a)if(Object.prototype.hasOwnProperty.call(a,o)){var n=void 0;try{n=a[o]}catch(r){continue}r.register(n,o,"/Users/kuba/repo/react-blurhash/src/BlurhashWorker.worker.js")}}else r.register(a,"module.exports","/Users/kuba/repo/react-blurhash/src/BlurhashWorker.worker.js")}}()}},e={},t=function t(a){var o=e[a];if(void 0!==o)return o.exports;var n=e[a]={exports:{}};return r[a].call(n.exports,n,n.exports,t),n.exports}(702)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL25vZGVfbW9kdWxlcy9ibHVyaGFzaC9kaXN0L2Jhc2U4My5qcyIsIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL25vZGVfbW9kdWxlcy9ibHVyaGFzaC9kaXN0L2RlY29kZS5qcyIsIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL25vZGVfbW9kdWxlcy9ibHVyaGFzaC9kaXN0L2VuY29kZS5qcyIsIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL25vZGVfbW9kdWxlcy9ibHVyaGFzaC9kaXN0L2Vycm9yLmpzIiwid2VicGFjazovL3JlYWN0LWJsdXJoYXNoLWFzeW5jLy4vbm9kZV9tb2R1bGVzL2JsdXJoYXNoL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcmVhY3QtYmx1cmhhc2gtYXN5bmMvLi9ub2RlX21vZHVsZXMvYmx1cmhhc2gvZGlzdC91dGlscy5qcyIsIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL3NyYy9CbHVyaGFzaFdvcmtlci53b3JrZXIuanMiLCJ3ZWJwYWNrOi8vcmVhY3QtYmx1cmhhc2gtYXN5bmMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmVhY3QtYmx1cmhhc2gtYXN5bmMvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGlnaXRDaGFyYWN0ZXJzIiwiZGVjb2RlODMiLCJzdHIiLCJpIiwibGVuZ3RoIiwiYyIsImluZGV4T2YiLCJlbmNvZGU4MyIsIm4iLCJyZXN1bHQiLCJkaWdpdCIsIk1hdGgiLCJmbG9vciIsInBvdyIsImJhc2U4M18xIiwidXRpbHNfMSIsImVycm9yXzEiLCJ2YWxpZGF0ZUJsdXJoYXNoIiwiYmx1cmhhc2giLCJWYWxpZGF0aW9uRXJyb3IiLCJzaXplRmxhZyIsIm51bVkiLCJudW1YIiwiaXNCbHVyaGFzaFZhbGlkIiwiZXJyb3IiLCJlcnJvclJlYXNvbiIsIm1lc3NhZ2UiLCJkZWNvZGVEQyIsImludFIiLCJpbnRHIiwiaW50QiIsInNSR0JUb0xpbmVhciIsImRlY29kZUFDIiwibWF4aW11bVZhbHVlIiwicXVhbnRSIiwicXVhbnRHIiwicXVhbnRCIiwic2lnblBvdyIsImRlZmF1bHQiLCJ3aWR0aCIsImhlaWdodCIsInB1bmNoIiwiY29sb3JzIiwiQXJyYXkiLCJzdWJzdHJpbmciLCJieXRlc1BlclJvdyIsInBpeGVscyIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwieSIsIngiLCJyIiwiZyIsImIiLCJqIiwiYmFzaXMiLCJjb3MiLCJQSSIsImNvbG9yIiwibGluZWFyVG9zUkdCIiwiY29tcG9uZW50WCIsImNvbXBvbmVudFkiLCJmYWN0b3JzIiwiX2xvb3BfMSIsIl9sb29wXzIiLCJub3JtYWxpc2F0aW9uIiwiZmFjdG9yIiwiYmFzaXNGdW5jdGlvbiIsInNjYWxlIiwibXVsdGlwbHlCYXNpc0Z1bmN0aW9uIiwicHVzaCIsImRjIiwiYWMiLCJzbGljZSIsImhhc2giLCJhY3R1YWxNYXhpbXVtVmFsdWUiLCJtYXgiLCJhcHBseSIsIm1hcCIsInZhbCIsInF1YW50aXNlZE1heGltdW1WYWx1ZSIsIm1pbiIsImZvckVhY2giLCJlbmNvZGVBQyIsImV4dGVuZFN0YXRpY3MiLCJfX2V4dGVuZHMiLCJ0aGlzIiwiZCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwicCIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsIl9zdXBlciIsIl90aGlzIiwiY2FsbCIsIm5hbWUiLCJFcnJvciIsImRlY29kZV8xIiwiZGVjb2RlIiwiZW5jb2RlXzEiLCJlbmNvZGUiLCJtIiwiX19leHBvcnQiLCJ2Iiwicm91bmQiLCJzaWduIiwiZXhwIiwiYWJzIiwid2Vha0NhbnZhc1N0b3JlIiwic2VsZiIsIm9ubWVzc2FnZSIsImFzeW5jIiwiZGF0YSIsInhDb3VudCIsInlDb3VudCIsImlkIiwiY2FudmFzIiwiV2Vha1JlZiIsImRlcmVmIiwiY3R4IiwiZ2V0Q29udGV4dCIsImltYWdlRGF0YSIsImNyZWF0ZUltYWdlRGF0YSIsInNldCIsImltZyIsImNyZWF0ZUltYWdlQml0bWFwIiwiZHJhd0ltYWdlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iXSwibWFwcGluZ3MiOiJzQ0FDQUEsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVDLE9BQU8sSUFDdEQsSUFBSUMsRUFBa0IsQ0FDbEIsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxLQUVKRixFQUFRRyxTQUFXLFNBQVVDLEdBRXpCLElBREEsSUFBSUgsRUFBUSxFQUNISSxFQUFJLEVBQUdBLEVBQUlELEVBQUlFLE9BQVFELElBQUssQ0FDakMsSUFBSUUsRUFBSUgsRUFBSUMsR0FFWkosRUFBZ0IsR0FBUkEsRUFESUMsRUFBZ0JNLFFB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LEVBQU9oRixNQUFRQSxHQUFTZ0YsRUFBT2hGLE1BQy9CZ0YsRUFBTy9FLE9BQVNBLEdBQVUrRSxFQUFPL0UsT0FDakMsTUFBTWtGLEVBQU1ILEVBQU9JLFdBQVcsTUFFeEI3RSxHQUFTLElBQUF1RCxRQUFPNUIsRUFBTTJDLEVBQVFDLEVBQVE1RSxHQUV0Q21GLEVBQVlGLEVBQUlHLGdCQUFnQlQsRUFBUUMsR0FDOUNPLEVBQVVULEtBQUtXLElBQUloRixHQUVuQixNQUFNaUYsUUFBWUMsa0JBQWtCSixFQUFXLEVBQUcsRUFBR1IsRUFBUUMsR0FLN0RLLEVBQUlPLFVBQVVGLEVBQUssRUFBRyxFQUFHUixFQUFPaEYsTUFBT2dGLEVBQU8vRSxTLHViQ3hDOUMwRixFQUEyQixHQ0UzQkMsRURDSixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUosRUFBeUJHLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFheEksUUFHckIsSUFBSTBJLEVBQVNOLEVBQXlCRyxHQUFZLENBR2pEdkksUUFBUyxJQU9WLE9BSEEySSxFQUFvQkosR0FBVXBDLEtBQUt1QyxFQUFPMUksUUFBUzBJLEVBQVFBLEVBQU8xSSxRQUFTc0ksR0FHcEVJLEVBQU8xSSxRQ2xCV3NJLENBQW9CLE0iLCJmaWxlIjoiNzAyLmRlbW8uYTE3Y2YyYjEyYzY5ZTcwMWViNWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBkaWdpdENoYXJhY3RlcnMgPSBbXG4gICAgXCIwXCIsXG4gICAgXCIxXCIsXG4gICAgXCIyXCIsXG4gICAgXCIzXCIsXG4gICAgXCI0XCIsXG4gICAgXCI1XCIsXG4gICAgXCI2XCIsXG4gICAgXCI3XCIsXG4gICAgXCI4XCIsXG4gICAgXCI5XCIsXG4gICAgXCJBXCIsXG4gICAgXCJCXCIsXG4gICAgXCJDXCIsXG4gICAgXCJEXCIsXG4gICAgXCJFXCIsXG4gICAgXCJGXCIsXG4gICAgXCJHXCIsXG4gICAgXCJIXCIsXG4gICAgXCJJXCIsXG4gICAgXCJKXCIsXG4gICAgXCJLXCIsXG4gICAgXCJMXCIsXG4gICAgXCJNXCIsXG4gICAgXCJOXCIsXG4gICAgXCJPXCIsXG4gICAgXCJQXCIsXG4gICAgXCJRXCIsXG4gICAgXCJSXCIsXG4gICAgXCJTXCIsXG4gICAgXCJUXCIsXG4gICAgXCJVXCIsXG4gICAgXCJWXCIsXG4gICAgXCJXXCIsXG4gICAgXCJYXCIsXG4gICAgXCJZXCIsXG4gICAgXCJaXCIsXG4gICAgXCJhXCIsXG4gICAgXCJiXCIsXG4gICAgXCJjXCIsXG4gICAgXCJkXCIsXG4gICAgXCJlXCIsXG4gICAgXCJmXCIsXG4gICAgXCJnXCIsXG4gICAgXCJoXCIsXG4gICAgXCJpXCIsXG4gICAgXCJqXCIsXG4gICAgXCJrXCIsXG4gICAgXCJsXCIsXG4gICAgXCJtXCIsXG4gICAgXCJuXCIsXG4gICAgXCJvXCIsXG4gICAgXCJwXCIsXG4gICAgXCJxXCIsXG4gICAgXCJyXCIsXG4gICAgXCJzXCIsXG4gICAgXCJ0XCIsXG4gICAgXCJ1XCIsXG4gICAgXCJ2XCIsXG4gICAgXCJ3XCIsXG4gICAgXCJ4XCIsXG4gICAgXCJ5XCIsXG4gICAgXCJ6XCIsXG4gICAgXCIjXCIsXG4gICAgXCIkXCIsXG4gICAgXCIlXCIsXG4gICAgXCIqXCIsXG4gICAgXCIrXCIsXG4gICAgXCIsXCIsXG4gICAgXCItXCIsXG4gICAgXCIuXCIsXG4gICAgXCI6XCIsXG4gICAgXCI7XCIsXG4gICAgXCI9XCIsXG4gICAgXCI/XCIsXG4gICAgXCJAXCIsXG4gICAgXCJbXCIsXG4gICAgXCJdXCIsXG4gICAgXCJeXCIsXG4gICAgXCJfXCIsXG4gICAgXCJ7XCIsXG4gICAgXCJ8XCIsXG4gICAgXCJ9XCIsXG4gICAgXCJ+XCJcbl07XG5leHBvcnRzLmRlY29kZTgzID0gZnVuY3Rpb24gKHN0cikge1xuICAgIHZhciB2YWx1ZSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGMgPSBzdHJbaV07XG4gICAgICAgIHZhciBkaWdpdCA9IGRpZ2l0Q2hhcmFjdGVycy5pbmRleE9mKGMpO1xuICAgICAgICB2YWx1ZSA9IHZhbHVlICogODMgKyBkaWdpdDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbmV4cG9ydHMuZW5jb2RlODMgPSBmdW5jdGlvbiAobiwgbGVuZ3RoKSB7XG4gICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGRpZ2l0ID0gKE1hdGguZmxvb3IobikgLyBNYXRoLnBvdyg4MywgbGVuZ3RoIC0gaSkpICUgODM7XG4gICAgICAgIHJlc3VsdCArPSBkaWdpdENoYXJhY3RlcnNbTWF0aC5mbG9vcihkaWdpdCldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2U4My5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBiYXNlODNfMSA9IHJlcXVpcmUoXCIuL2Jhc2U4M1wiKTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG52YXIgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xuLyoqXG4gKiBSZXR1cm5zIGFuIGVycm9yIG1lc3NhZ2UgaWYgaW52YWxpZCBvciB1bmRlZmluZWQgaWYgdmFsaWRcbiAqIEBwYXJhbSBibHVyaGFzaFxuICovXG52YXIgdmFsaWRhdGVCbHVyaGFzaCA9IGZ1bmN0aW9uIChibHVyaGFzaCkge1xuICAgIGlmICghYmx1cmhhc2ggfHwgYmx1cmhhc2gubGVuZ3RoIDwgNikge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5WYWxpZGF0aW9uRXJyb3IoXCJUaGUgYmx1cmhhc2ggc3RyaW5nIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzXCIpO1xuICAgIH1cbiAgICB2YXIgc2l6ZUZsYWcgPSBiYXNlODNfMS5kZWNvZGU4MyhibHVyaGFzaFswXSk7XG4gICAgdmFyIG51bVkgPSBNYXRoLmZsb29yKHNpemVGbGFnIC8gOSkgKyAxO1xuICAgIHZhciBudW1YID0gKHNpemVGbGFnICUgOSkgKyAxO1xuICAgIGlmIChibHVyaGFzaC5sZW5ndGggIT09IDQgKyAyICogbnVtWCAqIG51bVkpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuVmFsaWRhdGlvbkVycm9yKFwiYmx1cmhhc2ggbGVuZ3RoIG1pc21hdGNoOiBsZW5ndGggaXMgXCIgKyBibHVyaGFzaC5sZW5ndGggKyBcIiBidXQgaXQgc2hvdWxkIGJlIFwiICsgKDQgKyAyICogbnVtWCAqIG51bVkpKTtcbiAgICB9XG59O1xuZXhwb3J0cy5pc0JsdXJoYXNoVmFsaWQgPSBmdW5jdGlvbiAoYmx1cmhhc2gpIHtcbiAgICB0cnkge1xuICAgICAgICB2YWxpZGF0ZUJsdXJoYXNoKGJsdXJoYXNoKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7IHJlc3VsdDogZmFsc2UsIGVycm9yUmVhc29uOiBlcnJvci5tZXNzYWdlIH07XG4gICAgfVxuICAgIHJldHVybiB7IHJlc3VsdDogdHJ1ZSB9O1xufTtcbnZhciBkZWNvZGVEQyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBpbnRSID0gdmFsdWUgPj4gMTY7XG4gICAgdmFyIGludEcgPSAodmFsdWUgPj4gOCkgJiAyNTU7XG4gICAgdmFyIGludEIgPSB2YWx1ZSAmIDI1NTtcbiAgICByZXR1cm4gW3V0aWxzXzEuc1JHQlRvTGluZWFyKGludFIpLCB1dGlsc18xLnNSR0JUb0xpbmVhcihpbnRHKSwgdXRpbHNfMS5zUkdCVG9MaW5lYXIoaW50QildO1xufTtcbnZhciBkZWNvZGVBQyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWF4aW11bVZhbHVlKSB7XG4gICAgdmFyIHF1YW50UiA9IE1hdGguZmxvb3IodmFsdWUgLyAoMTkgKiAxOSkpO1xuICAgIHZhciBxdWFudEcgPSBNYXRoLmZsb29yKHZhbHVlIC8gMTkpICUgMTk7XG4gICAgdmFyIHF1YW50QiA9IHZhbHVlICUgMTk7XG4gICAgdmFyIHJnYiA9IFtcbiAgICAgICAgdXRpbHNfMS5zaWduUG93KChxdWFudFIgLSA5KSAvIDksIDIuMCkgKiBtYXhpbXVtVmFsdWUsXG4gICAgICAgIHV0aWxzXzEuc2lnblBvdygocXVhbnRHIC0gOSkgLyA5LCAyLjApICogbWF4aW11bVZhbHVlLFxuICAgICAgICB1dGlsc18xLnNpZ25Qb3coKHF1YW50QiAtIDkpIC8gOSwgMi4wKSAqIG1heGltdW1WYWx1ZVxuICAgIF07XG4gICAgcmV0dXJuIHJnYjtcbn07XG52YXIgZGVjb2RlID0gZnVuY3Rpb24gKGJsdXJoYXNoLCB3aWR0aCwgaGVpZ2h0LCBwdW5jaCkge1xuICAgIHZhbGlkYXRlQmx1cmhhc2goYmx1cmhhc2gpO1xuICAgIHB1bmNoID0gcHVuY2ggfCAxO1xuICAgIHZhciBzaXplRmxhZyA9IGJhc2U4M18xLmRlY29kZTgzKGJsdXJoYXNoWzBdKTtcbiAgICB2YXIgbnVtWSA9IE1hdGguZmxvb3Ioc2l6ZUZsYWcgLyA5KSArIDE7XG4gICAgdmFyIG51bVggPSAoc2l6ZUZsYWcgJSA5KSArIDE7XG4gICAgdmFyIHF1YW50aXNlZE1heGltdW1WYWx1ZSA9IGJhc2U4M18xLmRlY29kZTgzKGJsdXJoYXNoWzFdKTtcbiAgICB2YXIgbWF4aW11bVZhbHVlID0gKHF1YW50aXNlZE1heGltdW1WYWx1ZSArIDEpIC8gMTY2O1xuICAgIHZhciBjb2xvcnMgPSBuZXcgQXJyYXkobnVtWCAqIG51bVkpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBiYXNlODNfMS5kZWNvZGU4MyhibHVyaGFzaC5zdWJzdHJpbmcoMiwgNikpO1xuICAgICAgICAgICAgY29sb3JzW2ldID0gZGVjb2RlREModmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gYmFzZTgzXzEuZGVjb2RlODMoYmx1cmhhc2guc3Vic3RyaW5nKDQgKyBpICogMiwgNiArIGkgKiAyKSk7XG4gICAgICAgICAgICBjb2xvcnNbaV0gPSBkZWNvZGVBQyh2YWx1ZSwgbWF4aW11bVZhbHVlICogcHVuY2gpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBieXRlc1BlclJvdyA9IHdpZHRoICogNDtcbiAgICB2YXIgcGl4ZWxzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGJ5dGVzUGVyUm93ICogaGVpZ2h0KTtcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgdmFyIHIgPSAwO1xuICAgICAgICAgICAgdmFyIGcgPSAwO1xuICAgICAgICAgICAgdmFyIGIgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1ZOyBqKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bVg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmFzaXMgPSBNYXRoLmNvcygoTWF0aC5QSSAqIHggKiBpKSAvIHdpZHRoKSAqXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmNvcygoTWF0aC5QSSAqIHkgKiBqKSAvIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9yc1tpICsgaiAqIG51bVhdO1xuICAgICAgICAgICAgICAgICAgICByICs9IGNvbG9yWzBdICogYmFzaXM7XG4gICAgICAgICAgICAgICAgICAgIGcgKz0gY29sb3JbMV0gKiBiYXNpcztcbiAgICAgICAgICAgICAgICAgICAgYiArPSBjb2xvclsyXSAqIGJhc2lzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbnRSID0gdXRpbHNfMS5saW5lYXJUb3NSR0Iocik7XG4gICAgICAgICAgICB2YXIgaW50RyA9IHV0aWxzXzEubGluZWFyVG9zUkdCKGcpO1xuICAgICAgICAgICAgdmFyIGludEIgPSB1dGlsc18xLmxpbmVhclRvc1JHQihiKTtcbiAgICAgICAgICAgIHBpeGVsc1s0ICogeCArIDAgKyB5ICogYnl0ZXNQZXJSb3ddID0gaW50UjtcbiAgICAgICAgICAgIHBpeGVsc1s0ICogeCArIDEgKyB5ICogYnl0ZXNQZXJSb3ddID0gaW50RztcbiAgICAgICAgICAgIHBpeGVsc1s0ICogeCArIDIgKyB5ICogYnl0ZXNQZXJSb3ddID0gaW50QjtcbiAgICAgICAgICAgIHBpeGVsc1s0ICogeCArIDMgKyB5ICogYnl0ZXNQZXJSb3ddID0gMjU1OyAvLyBhbHBoYVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwaXhlbHM7XG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gZGVjb2RlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVjb2RlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGJhc2U4M18xID0gcmVxdWlyZShcIi4vYmFzZTgzXCIpO1xudmFyIHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbnZhciBlcnJvcl8xID0gcmVxdWlyZShcIi4vZXJyb3JcIik7XG52YXIgYnl0ZXNQZXJQaXhlbCA9IDQ7XG52YXIgbXVsdGlwbHlCYXNpc0Z1bmN0aW9uID0gZnVuY3Rpb24gKHBpeGVscywgd2lkdGgsIGhlaWdodCwgYmFzaXNGdW5jdGlvbikge1xuICAgIHZhciByID0gMDtcbiAgICB2YXIgZyA9IDA7XG4gICAgdmFyIGIgPSAwO1xuICAgIHZhciBieXRlc1BlclJvdyA9IHdpZHRoICogYnl0ZXNQZXJQaXhlbDtcbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgdmFyIGJhc2lzID0gYmFzaXNGdW5jdGlvbih4LCB5KTtcbiAgICAgICAgICAgIHIgKz1cbiAgICAgICAgICAgICAgICBiYXNpcyAqIHV0aWxzXzEuc1JHQlRvTGluZWFyKHBpeGVsc1tieXRlc1BlclBpeGVsICogeCArIDAgKyB5ICogYnl0ZXNQZXJSb3ddKTtcbiAgICAgICAgICAgIGcgKz1cbiAgICAgICAgICAgICAgICBiYXNpcyAqIHV0aWxzXzEuc1JHQlRvTGluZWFyKHBpeGVsc1tieXRlc1BlclBpeGVsICogeCArIDEgKyB5ICogYnl0ZXNQZXJSb3ddKTtcbiAgICAgICAgICAgIGIgKz1cbiAgICAgICAgICAgICAgICBiYXNpcyAqIHV0aWxzXzEuc1JHQlRvTGluZWFyKHBpeGVsc1tieXRlc1BlclBpeGVsICogeCArIDIgKyB5ICogYnl0ZXNQZXJSb3ddKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgc2NhbGUgPSAxIC8gKHdpZHRoICogaGVpZ2h0KTtcbiAgICByZXR1cm4gW3IgKiBzY2FsZSwgZyAqIHNjYWxlLCBiICogc2NhbGVdO1xufTtcbnZhciBlbmNvZGVEQyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciByb3VuZGVkUiA9IHV0aWxzXzEubGluZWFyVG9zUkdCKHZhbHVlWzBdKTtcbiAgICB2YXIgcm91bmRlZEcgPSB1dGlsc18xLmxpbmVhclRvc1JHQih2YWx1ZVsxXSk7XG4gICAgdmFyIHJvdW5kZWRCID0gdXRpbHNfMS5saW5lYXJUb3NSR0IodmFsdWVbMl0pO1xuICAgIHJldHVybiAocm91bmRlZFIgPDwgMTYpICsgKHJvdW5kZWRHIDw8IDgpICsgcm91bmRlZEI7XG59O1xudmFyIGVuY29kZUFDID0gZnVuY3Rpb24gKHZhbHVlLCBtYXhpbXVtVmFsdWUpIHtcbiAgICB2YXIgcXVhbnRSID0gTWF0aC5mbG9vcihNYXRoLm1heCgwLCBNYXRoLm1pbigxOCwgTWF0aC5mbG9vcih1dGlsc18xLnNpZ25Qb3codmFsdWVbMF0gLyBtYXhpbXVtVmFsdWUsIDAuNSkgKiA5ICsgOS41KSkpKTtcbiAgICB2YXIgcXVhbnRHID0gTWF0aC5mbG9vcihNYXRoLm1heCgwLCBNYXRoLm1pbigxOCwgTWF0aC5mbG9vcih1dGlsc18xLnNpZ25Qb3codmFsdWVbMV0gLyBtYXhpbXVtVmFsdWUsIDAuNSkgKiA5ICsgOS41KSkpKTtcbiAgICB2YXIgcXVhbnRCID0gTWF0aC5mbG9vcihNYXRoLm1heCgwLCBNYXRoLm1pbigxOCwgTWF0aC5mbG9vcih1dGlsc18xLnNpZ25Qb3codmFsdWVbMl0gLyBtYXhpbXVtVmFsdWUsIDAuNSkgKiA5ICsgOS41KSkpKTtcbiAgICByZXR1cm4gcXVhbnRSICogMTkgKiAxOSArIHF1YW50RyAqIDE5ICsgcXVhbnRCO1xufTtcbnZhciBlbmNvZGUgPSBmdW5jdGlvbiAocGl4ZWxzLCB3aWR0aCwgaGVpZ2h0LCBjb21wb25lbnRYLCBjb21wb25lbnRZKSB7XG4gICAgaWYgKGNvbXBvbmVudFggPCAxIHx8IGNvbXBvbmVudFggPiA5IHx8IGNvbXBvbmVudFkgPCAxIHx8IGNvbXBvbmVudFkgPiA5KSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLlZhbGlkYXRpb25FcnJvcihcIkJsdXJIYXNoIG11c3QgaGF2ZSBiZXR3ZWVuIDEgYW5kIDkgY29tcG9uZW50c1wiKTtcbiAgICB9XG4gICAgaWYgKHdpZHRoICogaGVpZ2h0ICogNCAhPT0gcGl4ZWxzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5WYWxpZGF0aW9uRXJyb3IoXCJXaWR0aCBhbmQgaGVpZ2h0IG11c3QgbWF0Y2ggdGhlIHBpeGVscyBhcnJheVwiKTtcbiAgICB9XG4gICAgdmFyIGZhY3RvcnMgPSBbXTtcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgIHZhciBfbG9vcF8yID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHZhciBub3JtYWxpc2F0aW9uID0geCA9PSAwICYmIHkgPT0gMCA/IDEgOiAyO1xuICAgICAgICAgICAgdmFyIGZhY3RvciA9IG11bHRpcGx5QmFzaXNGdW5jdGlvbihwaXhlbHMsIHdpZHRoLCBoZWlnaHQsIGZ1bmN0aW9uIChpLCBqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGlzYXRpb24gKlxuICAgICAgICAgICAgICAgICAgICBNYXRoLmNvcygoTWF0aC5QSSAqIHggKiBpKSAvIHdpZHRoKSAqXG4gICAgICAgICAgICAgICAgICAgIE1hdGguY29zKChNYXRoLlBJICogeSAqIGopIC8gaGVpZ2h0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZmFjdG9ycy5wdXNoKGZhY3Rvcik7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgY29tcG9uZW50WDsgeCsrKSB7XG4gICAgICAgICAgICBfbG9vcF8yKHgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGNvbXBvbmVudFk7IHkrKykge1xuICAgICAgICBfbG9vcF8xKHkpO1xuICAgIH1cbiAgICB2YXIgZGMgPSBmYWN0b3JzWzBdO1xuICAgIHZhciBhYyA9IGZhY3RvcnMuc2xpY2UoMSk7XG4gICAgdmFyIGhhc2ggPSBcIlwiO1xuICAgIHZhciBzaXplRmxhZyA9IGNvbXBvbmVudFggLSAxICsgKGNvbXBvbmVudFkgLSAxKSAqIDk7XG4gICAgaGFzaCArPSBiYXNlODNfMS5lbmNvZGU4MyhzaXplRmxhZywgMSk7XG4gICAgdmFyIG1heGltdW1WYWx1ZTtcbiAgICBpZiAoYWMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgYWN0dWFsTWF4aW11bVZhbHVlID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgYWMubWFwKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsIHZhbCk7IH0pKTtcbiAgICAgICAgdmFyIHF1YW50aXNlZE1heGltdW1WYWx1ZSA9IE1hdGguZmxvb3IoTWF0aC5tYXgoMCwgTWF0aC5taW4oODIsIE1hdGguZmxvb3IoYWN0dWFsTWF4aW11bVZhbHVlICogMTY2IC0gMC41KSkpKTtcbiAgICAgICAgbWF4aW11bVZhbHVlID0gKHF1YW50aXNlZE1heGltdW1WYWx1ZSArIDEpIC8gMTY2O1xuICAgICAgICBoYXNoICs9IGJhc2U4M18xLmVuY29kZTgzKHF1YW50aXNlZE1heGltdW1WYWx1ZSwgMSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXhpbXVtVmFsdWUgPSAxO1xuICAgICAgICBoYXNoICs9IGJhc2U4M18xLmVuY29kZTgzKDAsIDEpO1xuICAgIH1cbiAgICBoYXNoICs9IGJhc2U4M18xLmVuY29kZTgzKGVuY29kZURDKGRjKSwgNCk7XG4gICAgYWMuZm9yRWFjaChmdW5jdGlvbiAoZmFjdG9yKSB7XG4gICAgICAgIGhhc2ggKz0gYmFzZTgzXzEuZW5jb2RlODMoZW5jb2RlQUMoZmFjdG9yLCBtYXhpbXVtVmFsdWUpLCAyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaGFzaDtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBlbmNvZGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbmNvZGUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0aW9uRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZhbGlkYXRpb25FcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBWYWxpZGF0aW9uRXJyb3IobWVzc2FnZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gXCJWYWxpZGF0aW9uRXJyb3JcIjtcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFZhbGlkYXRpb25FcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydHMuVmFsaWRhdGlvbkVycm9yID0gVmFsaWRhdGlvbkVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGRlY29kZV8xID0gcmVxdWlyZShcIi4vZGVjb2RlXCIpO1xuZXhwb3J0cy5kZWNvZGUgPSBkZWNvZGVfMS5kZWZhdWx0O1xuZXhwb3J0cy5pc0JsdXJoYXNoVmFsaWQgPSBkZWNvZGVfMS5pc0JsdXJoYXNoVmFsaWQ7XG52YXIgZW5jb2RlXzEgPSByZXF1aXJlKFwiLi9lbmNvZGVcIik7XG5leHBvcnRzLmVuY29kZSA9IGVuY29kZV8xLmRlZmF1bHQ7XG5fX2V4cG9ydChyZXF1aXJlKFwiLi9lcnJvclwiKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc1JHQlRvTGluZWFyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIHYgPSB2YWx1ZSAvIDI1NTtcbiAgICBpZiAodiA8PSAwLjA0MDQ1KSB7XG4gICAgICAgIHJldHVybiB2IC8gMTIuOTI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coKHYgKyAwLjA1NSkgLyAxLjA1NSwgMi40KTtcbiAgICB9XG59O1xuZXhwb3J0cy5saW5lYXJUb3NSR0IgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgdiA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZhbHVlKSk7XG4gICAgaWYgKHYgPD0gMC4wMDMxMzA4KSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHYgKiAxMi45MiAqIDI1NSArIDAuNSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoMS4wNTUgKiBNYXRoLnBvdyh2LCAxIC8gMi40KSAtIDAuMDU1KSAqIDI1NSArIDAuNSk7XG4gICAgfVxufTtcbmV4cG9ydHMuc2lnbiA9IGZ1bmN0aW9uIChuKSB7IHJldHVybiAobiA8IDAgPyAtMSA6IDEpOyB9O1xuZXhwb3J0cy5zaWduUG93ID0gZnVuY3Rpb24gKHZhbCwgZXhwKSB7XG4gICAgcmV0dXJuIGV4cG9ydHMuc2lnbih2YWwpICogTWF0aC5wb3coTWF0aC5hYnModmFsKSwgZXhwKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCIvLyBzb3VyY2U6IGh0dHBzOi8vc3RhY2tibGl0ei5jb20vZWRpdC9wb2MtYmx1cmhhc2gtd2Vid29ya2VyP2ZpbGU9Ymx1cmhhc2hEZWNvZGVyLndvcmtlci5qcyxpbmRleC5qc1xuaW1wb3J0IHsgZGVjb2RlIH0gZnJvbSAnYmx1cmhhc2gnO1xuXG5jb25zdCB3ZWFrQ2FudmFzU3RvcmUgPSB7fVxuXG5zZWxmLm9ubWVzc2FnZSA9IGFzeW5jICh7IGRhdGEgfSkgPT4ge1xuICAgIGxldCB7XG4gICAgICAgIGhhc2gsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIHhDb3VudCxcbiAgICAgICAgeUNvdW50LFxuICAgICAgICBwdW5jaCxcbiAgICAgICAgaWRcbiAgICB9ID0gZGF0YTtcblxuICAgIC8vIGNvbnNvbGUudGltZSgnb2Zmc2NyZWVuIGNhbnZhcycpXG5cbiAgICBpZiAoZGF0YS5jYW52YXMpIHtcbiAgICAgICAgd2Vha0NhbnZhc1N0b3JlW2lkXSA9IG5ldyBXZWFrUmVmKGRhdGEuY2FudmFzKVxuICAgIH1cblxuICAgIGNvbnN0IGNhbnZhcyA9IHdlYWtDYW52YXNTdG9yZVtpZF0/LmRlcmVmKClcblxuICAgIGlmICghY2FudmFzKSByZXR1cm47XG5cblxuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoIHx8IGNhbnZhcy53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0IHx8IGNhbnZhcy5oZWlnaHQ7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICBjb25zdCBwaXhlbHMgPSBkZWNvZGUoaGFzaCwgeENvdW50LCB5Q291bnQsIHB1bmNoKTtcblxuICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEoeENvdW50LCB5Q291bnQpO1xuICAgIGltYWdlRGF0YS5kYXRhLnNldChwaXhlbHMpO1xuXG4gICAgY29uc3QgaW1nID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAoaW1hZ2VEYXRhLCAwLCAwLCB4Q291bnQsIHlDb3VudClcblxuICAgIC8vIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSB0cnVlXG4gICAgLy8gY3R4LmltYWdlU21vb3RoaW5nUXVhbGl0eSA9ICdoaWdoJ1xuICAgIC8vIGN0eC5maWx0ZXIgPSBgYmx1cig0cHgpYFxuICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXG5cbiAgICAvLyBjb25zb2xlLnRpbWVFbmQoJ29mZnNjcmVlbiBjYW52YXMnKVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MDIpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==