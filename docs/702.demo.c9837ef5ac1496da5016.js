(()=>{"use strict";var r={403:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"];e.decode83=function(r){for(var e=0,a=0;a<r.length;a++){var o=r[a];e=83*e+t.indexOf(o)}return e},e.encode83=function(r,e){for(var a="",o=1;o<=e;o++){var n=Math.floor(r)/Math.pow(83,e-o)%83;a+=t[Math.floor(n)]}return a}},55:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=t(403),o=t(96),n=t(795),i=function(r){if(!r||r.length<6)throw new n.ValidationError("The blurhash string must be at least 6 characters");var e=a.decode83(r[0]),t=Math.floor(e/9)+1,o=e%9+1;if(r.length!==4+2*o*t)throw new n.ValidationError("blurhash length mismatch: length is "+r.length+" but it should be "+(4+2*o*t))};e.isBlurhashValid=function(r){try{i(r)}catch(r){return{result:!1,errorReason:r.message}}return{result:!0}};var s=function(r){var e=r>>16,t=r>>8&255,a=255&r;return[o.sRGBToLinear(e),o.sRGBToLinear(t),o.sRGBToLinear(a)]},h=function(r,e){var t=Math.floor(r/361),a=Math.floor(r/19)%19,n=r%19;return[o.signPow((t-9)/9,2)*e,o.signPow((a-9)/9,2)*e,o.signPow((n-9)/9,2)*e]};e.default=function(r,e,t,n){i(r),n|=1;for(var u=a.decode83(r[0]),l=Math.floor(u/9)+1,c=u%9+1,f=(a.decode83(r[1])+1)/166,d=new Array(c*l),v=0;v<d.length;v++)if(0===v){var M=a.decode83(r.substring(2,6));d[v]=s(M)}else M=a.decode83(r.substring(4+2*v,6+2*v)),d[v]=h(M,f*n);for(var p=4*e,g=new Uint8ClampedArray(p*t),w=0;w<t;w++)for(var m=0;m<e;m++){for(var y=0,b=0,_=0,P=0;P<l;P++)for(v=0;v<c;v++){var B=Math.cos(Math.PI*m*v/e)*Math.cos(Math.PI*w*P/t),x=d[v+P*c];y+=x[0]*B,b+=x[1]*B,_+=x[2]*B}var G=o.linearTosRGB(y),R=o.linearTosRGB(b),O=o.linearTosRGB(_);g[4*m+0+w*p]=G,g[4*m+1+w*p]=R,g[4*m+2+w*p]=O,g[4*m+3+w*p]=255}return g}},796:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=t(403),o=t(96),n=t(795);e.default=function(r,e,t,i,s){if(i<1||i>9||s<1||s>9)throw new n.ValidationError("BlurHash must have between 1 and 9 components");if(e*t*4!==r.length)throw new n.ValidationError("Width and height must match the pixels array");for(var h=[],u=function(a){for(var n=function(n){var i=0==n&&0==a?1:2,s=function(r,e,t,a){for(var n=0,i=0,s=0,h=4*e,u=0;u<e;u++)for(var l=0;l<t;l++){var c=a(u,l);n+=c*o.sRGBToLinear(r[4*u+0+l*h]),i+=c*o.sRGBToLinear(r[4*u+1+l*h]),s+=c*o.sRGBToLinear(r[4*u+2+l*h])}var f=1/(e*t);return[n*f,i*f,s*f]}(r,e,t,(function(r,o){return i*Math.cos(Math.PI*n*r/e)*Math.cos(Math.PI*a*o/t)}));h.push(s)},s=0;s<i;s++)n(s)},l=0;l<s;l++)u(l);var c,f,d=h[0],v=h.slice(1),M="",p=i-1+9*(s-1);if(M+=a.encode83(p,1),v.length>0){var g=Math.max.apply(Math,v.map((function(r){return Math.max.apply(Math,r)}))),w=Math.floor(Math.max(0,Math.min(82,Math.floor(166*g-.5))));c=(w+1)/166,M+=a.encode83(w,1)}else c=1,M+=a.encode83(0,1);return M+=a.encode83((f=d,(o.linearTosRGB(f[0])<<16)+(o.linearTosRGB(f[1])<<8)+o.linearTosRGB(f[2])),4),v.forEach((function(r){M+=a.encode83(function(r,e){return 19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[0]/e,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[1]/e,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*o.signPow(r[2]/e,.5)+9.5))))}(r,c),2)})),M}},795:function(r,e){var t,a=this&&this.__extends||(t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},t(r,e)},function(r,e){function a(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(r){function e(e){var t=r.call(this,e)||this;return t.name="ValidationError",t.message=e,t}return a(e,r),e}(Error);e.ValidationError=o},60:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var a=t(55);e.decode=a.default,e.isBlurhashValid=a.isBlurhashValid;var o=t(796);e.encode=o.default,function(r){for(var t in r)e.hasOwnProperty(t)||(e[t]=r[t])}(t(795))},96:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sRGBToLinear=function(r){var e=r/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},e.linearTosRGB=function(r){var e=Math.max(0,Math.min(1,r));return e<=.0031308?Math.round(12.92*e*255+.5):Math.round(255*(1.055*Math.pow(e,1/2.4)-.055)+.5)},e.sign=function(r){return r<0?-1:1},e.signPow=function(r,t){return e.sign(r)*Math.pow(Math.abs(r),t)}},702:(r,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const o=a(60),n={};self.onmessage=async({data:r})=>{var e;let{hash:t,width:a,height:i,xCount:s,yCount:h,punch:u,id:l}=r;r.canvas&&(n[l]=new WeakRef(r.canvas));const c=null===(e=n[l])||void 0===e?void 0:e.deref();if(!c)return;c.width=a||c.width,c.height=i||c.height;const f=c.getContext("2d"),d=(0,o.decode)(t,s,h,u),v=f.createImageData(s,h);v.data.set(d);const M=await createImageBitmap(v,0,0,s,h);f.drawImage(M,0,0,c.width,c.height)},function(){var r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;if(r){var a=void 0!==t?t:e;if(a)if("function"!=typeof a){for(var o in a)if(Object.prototype.hasOwnProperty.call(a,o)){var n=void 0;try{n=a[o]}catch(r){continue}r.register(n,o,"/Users/kuba/repo/react-blurhash/src/BlurhashWorker.worker.js")}}else r.register(a,"module.exports","/Users/kuba/repo/react-blurhash/src/BlurhashWorker.worker.js")}}()}},e={},t=function t(a){var o=e[a];if(void 0!==o)return o.exports;var n=e[a]={exports:{}};return r[a].call(n.exports,n,n.exports,t),n.exports}(702)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL25vZGVfbW9kdWxlcy9ibHVyaGFzaC9kaXN0L2Jhc2U4My5qcyIsIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL25vZGVfbW9kdWxlcy9ibHVyaGFzaC9kaXN0L2RlY29kZS5qcyIsIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL25vZGVfbW9kdWxlcy9ibHVyaGFzaC9kaXN0L2VuY29kZS5qcyIsIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL25vZGVfbW9kdWxlcy9ibHVyaGFzaC9kaXN0L2Vycm9yLmpzIiwid2VicGFjazovL3JlYWN0LWJsdXJoYXNoLWFzeW5jLy4vbm9kZV9tb2R1bGVzL2JsdXJoYXNoL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcmVhY3QtYmx1cmhhc2gtYXN5bmMvLi9ub2RlX21vZHVsZXMvYmx1cmhhc2gvZGlzdC91dGlscy5qcyIsIndlYnBhY2s6Ly9yZWFjdC1ibHVyaGFzaC1hc3luYy8uL3NyYy9CbHVyaGFzaFdvcmtlci53b3JrZXIuanMiLCJ3ZWJwYWNrOi8vcmVhY3QtYmx1cmhhc2gtYXN5bmMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmVhY3QtYmx1cmhhc2gtYXN5bmMvd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGlnaXRDaGFyYWN0ZXJzIiwiZGVjb2RlODMiLCJzdHIiLCJpIiwibGVuZ3RoIiwiYyIsImluZGV4T2YiLCJlbmNvZGU4MyIsIm4iLCJyZXN1bHQiLCJkaWdpdCIsIk1hdGgiLCJmbG9vciIsInBvdyIsImJhc2U4M18xIiwidXRpbHNfMSIsImVycm9yXzEiLCJ2YWxpZGF0ZUJsdXJoYXNoIiwiYmx1cmhhc2giLCJWYWxpZGF0aW9uRXJyb3IiLCJzaXplRmxhZyIsIm51bVkiLCJudW1YIiwiaXNCbHVyaGFzaFZhbGlkIiwiZXJyb3IiLCJlcnJvclJlYXNvbiIsIm1lc3NhZ2UiLCJkZWNvZGVEQyIsImludFIiLCJpbnRHIiwiaW50QiIsInNSR0JUb0xpbmVhciIsImRlY29kZUFDIiwibWF4aW11bVZhbHVlIiwicXVhbnRSIiwicXVhbnRHIiwicXVhbnRCIiwic2lnblBvdyIsImRlZmF1bHQiLCJ3aWR0aCIsImhlaWdodCIsInB1bmNoIiwiY29sb3JzIiwiQXJyYXkiLCJzdWJzdHJpbmciLCJieXRlc1BlclJvdyIsInBpeGVscyIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwieSIsIngiLCJyIiwiZyIsImIiLCJqIiwiYmFzaXMiLCJjb3MiLCJQSSIsImNvbG9yIiwibGluZWFyVG9zUkdCIiwiY29tcG9uZW50WCIsImNvbXBvbmVudFkiLCJmYWN0b3JzIiwiX2xvb3BfMSIsIl9sb29wXzIiLCJub3JtYWxpc2F0aW9uIiwiZmFjdG9yIiwiYmFzaXNGdW5jdGlvbiIsInNjYWxlIiwibXVsdGlwbHlCYXNpc0Z1bmN0aW9uIiwicHVzaCIsImRjIiwiYWMiLCJzbGljZSIsImhhc2giLCJhY3R1YWxNYXhpbXVtVmFsdWUiLCJtYXgiLCJhcHBseSIsIm1hcCIsInZhbCIsInF1YW50aXNlZE1heGltdW1WYWx1ZSIsIm1pbiIsImZvckVhY2giLCJlbmNvZGVBQyIsImV4dGVuZFN0YXRpY3MiLCJfX2V4dGVuZHMiLCJ0aGlzIiwiZCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwicCIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsIl9zdXBlciIsIl90aGlzIiwiY2FsbCIsIm5hbWUiLCJFcnJvciIsImRlY29kZV8xIiwiZGVjb2RlIiwiZW5jb2RlXzEiLCJlbmNvZGUiLCJtIiwiX19leHBvcnQiLCJ2Iiwicm91bmQiLCJzaWduIiwiZXhwIiwiYWJzIiwid2Vha0NhbnZhc1N0b3JlIiwic2VsZiIsIm9ubWVzc2FnZSIsImFzeW5jIiwiZGF0YSIsInhDb3VudCIsInlDb3VudCIsImlkIiwiY2FudmFzIiwiV2Vha1JlZiIsImRlcmVmIiwiY3R4IiwiZ2V0Q29udGV4dCIsImltYWdlRGF0YSIsImNyZWF0ZUltYWdlRGF0YSIsInNldCIsImltZyIsImNyZWF0ZUltYWdlQml0bWFwIiwiZHJhd0ltYWdlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iXSwibWFwcGluZ3MiOiJzQ0FDQUEsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVDLE9BQU8sSUFDdEQsSUFBSUMsRUFBa0IsQ0FDbEIsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxLQUVKRixFQUFRRyxTQUFXLFNBQVVDLEdBRXpCLElBREEsSUFBSUgsRUFBUSxFQUNISSxFQUFJLEVBQUdBLEVBQUlELEVBQUlFLE9BQVFELElBQUssQ0FDakMsSUFBSUUsRUFBSUgsRUFBSUMsR0FFWkosRUFBZ0IsR0FBUkEsRUFESUMsRUFBZ0JNLFFB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cEMsSUFBS0YsRUFBUSxPQUdiQSxFQUFPaEYsTUFBUUEsR0FBU2dGLEVBQU9oRixNQUMvQmdGLEVBQU8vRSxPQUFTQSxHQUFVK0UsRUFBTy9FLE9BQ2pDLE1BQU1rRixFQUFNSCxFQUFPSSxXQUFXLE1BRXhCN0UsR0FBUyxJQUFBdUQsUUFBTzVCLEVBQU0yQyxFQUFRQyxFQUFRNUUsR0FFdENtRixFQUFZRixFQUFJRyxnQkFBZ0JULEVBQVFDLEdBQzlDTyxFQUFVVCxLQUFLVyxJQUFJaEYsR0FFbkIsTUFBTWlGLFFBQVlDLGtCQUFrQkosRUFBVyxFQUFHLEVBQUdSLEVBQVFDLEdBSzdESyxFQUFJTyxVQUFVRixFQUFLLEVBQUcsRUFBR1IsRUFBT2hGLE1BQU9nRixFQUFPL0UsUyx1YkN4QzlDMEYsRUFBMkIsR0NFM0JDLEVEQ0osU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVKLEVBQXlCRyxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYXhJLFFBR3JCLElBQUkwSSxFQUFTTixFQUF5QkcsR0FBWSxDQUdqRHZJLFFBQVMsSUFPVixPQUhBMkksRUFBb0JKLEdBQVVwQyxLQUFLdUMsRUFBTzFJLFFBQVMwSSxFQUFRQSxFQUFPMUksUUFBU3NJLEdBR3BFSSxFQUFPMUksUUNsQldzSSxDQUFvQixNIiwiZmlsZSI6IjcwMi5kZW1vLmM5ODM3ZWY1YWMxNDk2ZGE1MDE2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgZGlnaXRDaGFyYWN0ZXJzID0gW1xuICAgIFwiMFwiLFxuICAgIFwiMVwiLFxuICAgIFwiMlwiLFxuICAgIFwiM1wiLFxuICAgIFwiNFwiLFxuICAgIFwiNVwiLFxuICAgIFwiNlwiLFxuICAgIFwiN1wiLFxuICAgIFwiOFwiLFxuICAgIFwiOVwiLFxuICAgIFwiQVwiLFxuICAgIFwiQlwiLFxuICAgIFwiQ1wiLFxuICAgIFwiRFwiLFxuICAgIFwiRVwiLFxuICAgIFwiRlwiLFxuICAgIFwiR1wiLFxuICAgIFwiSFwiLFxuICAgIFwiSVwiLFxuICAgIFwiSlwiLFxuICAgIFwiS1wiLFxuICAgIFwiTFwiLFxuICAgIFwiTVwiLFxuICAgIFwiTlwiLFxuICAgIFwiT1wiLFxuICAgIFwiUFwiLFxuICAgIFwiUVwiLFxuICAgIFwiUlwiLFxuICAgIFwiU1wiLFxuICAgIFwiVFwiLFxuICAgIFwiVVwiLFxuICAgIFwiVlwiLFxuICAgIFwiV1wiLFxuICAgIFwiWFwiLFxuICAgIFwiWVwiLFxuICAgIFwiWlwiLFxuICAgIFwiYVwiLFxuICAgIFwiYlwiLFxuICAgIFwiY1wiLFxuICAgIFwiZFwiLFxuICAgIFwiZVwiLFxuICAgIFwiZlwiLFxuICAgIFwiZ1wiLFxuICAgIFwiaFwiLFxuICAgIFwiaVwiLFxuICAgIFwialwiLFxuICAgIFwia1wiLFxuICAgIFwibFwiLFxuICAgIFwibVwiLFxuICAgIFwiblwiLFxuICAgIFwib1wiLFxuICAgIFwicFwiLFxuICAgIFwicVwiLFxuICAgIFwiclwiLFxuICAgIFwic1wiLFxuICAgIFwidFwiLFxuICAgIFwidVwiLFxuICAgIFwidlwiLFxuICAgIFwid1wiLFxuICAgIFwieFwiLFxuICAgIFwieVwiLFxuICAgIFwielwiLFxuICAgIFwiI1wiLFxuICAgIFwiJFwiLFxuICAgIFwiJVwiLFxuICAgIFwiKlwiLFxuICAgIFwiK1wiLFxuICAgIFwiLFwiLFxuICAgIFwiLVwiLFxuICAgIFwiLlwiLFxuICAgIFwiOlwiLFxuICAgIFwiO1wiLFxuICAgIFwiPVwiLFxuICAgIFwiP1wiLFxuICAgIFwiQFwiLFxuICAgIFwiW1wiLFxuICAgIFwiXVwiLFxuICAgIFwiXlwiLFxuICAgIFwiX1wiLFxuICAgIFwie1wiLFxuICAgIFwifFwiLFxuICAgIFwifVwiLFxuICAgIFwiflwiXG5dO1xuZXhwb3J0cy5kZWNvZGU4MyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICB2YXIgdmFsdWUgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjID0gc3RyW2ldO1xuICAgICAgICB2YXIgZGlnaXQgPSBkaWdpdENoYXJhY3RlcnMuaW5kZXhPZihjKTtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSAqIDgzICsgZGlnaXQ7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn07XG5leHBvcnRzLmVuY29kZTgzID0gZnVuY3Rpb24gKG4sIGxlbmd0aCkge1xuICAgIHZhciByZXN1bHQgPSBcIlwiO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBkaWdpdCA9IChNYXRoLmZsb29yKG4pIC8gTWF0aC5wb3coODMsIGxlbmd0aCAtIGkpKSAlIDgzO1xuICAgICAgICByZXN1bHQgKz0gZGlnaXRDaGFyYWN0ZXJzW01hdGguZmxvb3IoZGlnaXQpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlODMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgYmFzZTgzXzEgPSByZXF1aXJlKFwiLi9iYXNlODNcIik7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xudmFyIGVycm9yXzEgPSByZXF1aXJlKFwiLi9lcnJvclwiKTtcbi8qKlxuICogUmV0dXJucyBhbiBlcnJvciBtZXNzYWdlIGlmIGludmFsaWQgb3IgdW5kZWZpbmVkIGlmIHZhbGlkXG4gKiBAcGFyYW0gYmx1cmhhc2hcbiAqL1xudmFyIHZhbGlkYXRlQmx1cmhhc2ggPSBmdW5jdGlvbiAoYmx1cmhhc2gpIHtcbiAgICBpZiAoIWJsdXJoYXNoIHx8IGJsdXJoYXNoLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuVmFsaWRhdGlvbkVycm9yKFwiVGhlIGJsdXJoYXNoIHN0cmluZyBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVyc1wiKTtcbiAgICB9XG4gICAgdmFyIHNpemVGbGFnID0gYmFzZTgzXzEuZGVjb2RlODMoYmx1cmhhc2hbMF0pO1xuICAgIHZhciBudW1ZID0gTWF0aC5mbG9vcihzaXplRmxhZyAvIDkpICsgMTtcbiAgICB2YXIgbnVtWCA9IChzaXplRmxhZyAlIDkpICsgMTtcbiAgICBpZiAoYmx1cmhhc2gubGVuZ3RoICE9PSA0ICsgMiAqIG51bVggKiBudW1ZKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcl8xLlZhbGlkYXRpb25FcnJvcihcImJsdXJoYXNoIGxlbmd0aCBtaXNtYXRjaDogbGVuZ3RoIGlzIFwiICsgYmx1cmhhc2gubGVuZ3RoICsgXCIgYnV0IGl0IHNob3VsZCBiZSBcIiArICg0ICsgMiAqIG51bVggKiBudW1ZKSk7XG4gICAgfVxufTtcbmV4cG9ydHMuaXNCbHVyaGFzaFZhbGlkID0gZnVuY3Rpb24gKGJsdXJoYXNoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFsaWRhdGVCbHVyaGFzaChibHVyaGFzaCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4geyByZXN1bHQ6IGZhbHNlLCBlcnJvclJlYXNvbjogZXJyb3IubWVzc2FnZSB9O1xuICAgIH1cbiAgICByZXR1cm4geyByZXN1bHQ6IHRydWUgfTtcbn07XG52YXIgZGVjb2RlREMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgaW50UiA9IHZhbHVlID4+IDE2O1xuICAgIHZhciBpbnRHID0gKHZhbHVlID4+IDgpICYgMjU1O1xuICAgIHZhciBpbnRCID0gdmFsdWUgJiAyNTU7XG4gICAgcmV0dXJuIFt1dGlsc18xLnNSR0JUb0xpbmVhcihpbnRSKSwgdXRpbHNfMS5zUkdCVG9MaW5lYXIoaW50RyksIHV0aWxzXzEuc1JHQlRvTGluZWFyKGludEIpXTtcbn07XG52YXIgZGVjb2RlQUMgPSBmdW5jdGlvbiAodmFsdWUsIG1heGltdW1WYWx1ZSkge1xuICAgIHZhciBxdWFudFIgPSBNYXRoLmZsb29yKHZhbHVlIC8gKDE5ICogMTkpKTtcbiAgICB2YXIgcXVhbnRHID0gTWF0aC5mbG9vcih2YWx1ZSAvIDE5KSAlIDE5O1xuICAgIHZhciBxdWFudEIgPSB2YWx1ZSAlIDE5O1xuICAgIHZhciByZ2IgPSBbXG4gICAgICAgIHV0aWxzXzEuc2lnblBvdygocXVhbnRSIC0gOSkgLyA5LCAyLjApICogbWF4aW11bVZhbHVlLFxuICAgICAgICB1dGlsc18xLnNpZ25Qb3coKHF1YW50RyAtIDkpIC8gOSwgMi4wKSAqIG1heGltdW1WYWx1ZSxcbiAgICAgICAgdXRpbHNfMS5zaWduUG93KChxdWFudEIgLSA5KSAvIDksIDIuMCkgKiBtYXhpbXVtVmFsdWVcbiAgICBdO1xuICAgIHJldHVybiByZ2I7XG59O1xudmFyIGRlY29kZSA9IGZ1bmN0aW9uIChibHVyaGFzaCwgd2lkdGgsIGhlaWdodCwgcHVuY2gpIHtcbiAgICB2YWxpZGF0ZUJsdXJoYXNoKGJsdXJoYXNoKTtcbiAgICBwdW5jaCA9IHB1bmNoIHwgMTtcbiAgICB2YXIgc2l6ZUZsYWcgPSBiYXNlODNfMS5kZWNvZGU4MyhibHVyaGFzaFswXSk7XG4gICAgdmFyIG51bVkgPSBNYXRoLmZsb29yKHNpemVGbGFnIC8gOSkgKyAxO1xuICAgIHZhciBudW1YID0gKHNpemVGbGFnICUgOSkgKyAxO1xuICAgIHZhciBxdWFudGlzZWRNYXhpbXVtVmFsdWUgPSBiYXNlODNfMS5kZWNvZGU4MyhibHVyaGFzaFsxXSk7XG4gICAgdmFyIG1heGltdW1WYWx1ZSA9IChxdWFudGlzZWRNYXhpbXVtVmFsdWUgKyAxKSAvIDE2NjtcbiAgICB2YXIgY29sb3JzID0gbmV3IEFycmF5KG51bVggKiBudW1ZKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gYmFzZTgzXzEuZGVjb2RlODMoYmx1cmhhc2guc3Vic3RyaW5nKDIsIDYpKTtcbiAgICAgICAgICAgIGNvbG9yc1tpXSA9IGRlY29kZURDKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJhc2U4M18xLmRlY29kZTgzKGJsdXJoYXNoLnN1YnN0cmluZyg0ICsgaSAqIDIsIDYgKyBpICogMikpO1xuICAgICAgICAgICAgY29sb3JzW2ldID0gZGVjb2RlQUModmFsdWUsIG1heGltdW1WYWx1ZSAqIHB1bmNoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgYnl0ZXNQZXJSb3cgPSB3aWR0aCAqIDQ7XG4gICAgdmFyIHBpeGVscyA9IG5ldyBVaW50OENsYW1wZWRBcnJheShieXRlc1BlclJvdyAqIGhlaWdodCk7XG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgIHZhciByID0gMDtcbiAgICAgICAgICAgIHZhciBnID0gMDtcbiAgICAgICAgICAgIHZhciBiID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtWTsgaisrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1YOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2lzID0gTWF0aC5jb3MoKE1hdGguUEkgKiB4ICogaSkgLyB3aWR0aCkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5jb3MoKE1hdGguUEkgKiB5ICogaikgLyBoZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBjb2xvcnNbaSArIGogKiBudW1YXTtcbiAgICAgICAgICAgICAgICAgICAgciArPSBjb2xvclswXSAqIGJhc2lzO1xuICAgICAgICAgICAgICAgICAgICBnICs9IGNvbG9yWzFdICogYmFzaXM7XG4gICAgICAgICAgICAgICAgICAgIGIgKz0gY29sb3JbMl0gKiBiYXNpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW50UiA9IHV0aWxzXzEubGluZWFyVG9zUkdCKHIpO1xuICAgICAgICAgICAgdmFyIGludEcgPSB1dGlsc18xLmxpbmVhclRvc1JHQihnKTtcbiAgICAgICAgICAgIHZhciBpbnRCID0gdXRpbHNfMS5saW5lYXJUb3NSR0IoYik7XG4gICAgICAgICAgICBwaXhlbHNbNCAqIHggKyAwICsgeSAqIGJ5dGVzUGVyUm93XSA9IGludFI7XG4gICAgICAgICAgICBwaXhlbHNbNCAqIHggKyAxICsgeSAqIGJ5dGVzUGVyUm93XSA9IGludEc7XG4gICAgICAgICAgICBwaXhlbHNbNCAqIHggKyAyICsgeSAqIGJ5dGVzUGVyUm93XSA9IGludEI7XG4gICAgICAgICAgICBwaXhlbHNbNCAqIHggKyAzICsgeSAqIGJ5dGVzUGVyUm93XSA9IDI1NTsgLy8gYWxwaGFcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGl4ZWxzO1xufTtcbmV4cG9ydHMuZGVmYXVsdCA9IGRlY29kZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlY29kZS5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBiYXNlODNfMSA9IHJlcXVpcmUoXCIuL2Jhc2U4M1wiKTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG52YXIgZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9yXCIpO1xudmFyIGJ5dGVzUGVyUGl4ZWwgPSA0O1xudmFyIG11bHRpcGx5QmFzaXNGdW5jdGlvbiA9IGZ1bmN0aW9uIChwaXhlbHMsIHdpZHRoLCBoZWlnaHQsIGJhc2lzRnVuY3Rpb24pIHtcbiAgICB2YXIgciA9IDA7XG4gICAgdmFyIGcgPSAwO1xuICAgIHZhciBiID0gMDtcbiAgICB2YXIgYnl0ZXNQZXJSb3cgPSB3aWR0aCAqIGJ5dGVzUGVyUGl4ZWw7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIHZhciBiYXNpcyA9IGJhc2lzRnVuY3Rpb24oeCwgeSk7XG4gICAgICAgICAgICByICs9XG4gICAgICAgICAgICAgICAgYmFzaXMgKiB1dGlsc18xLnNSR0JUb0xpbmVhcihwaXhlbHNbYnl0ZXNQZXJQaXhlbCAqIHggKyAwICsgeSAqIGJ5dGVzUGVyUm93XSk7XG4gICAgICAgICAgICBnICs9XG4gICAgICAgICAgICAgICAgYmFzaXMgKiB1dGlsc18xLnNSR0JUb0xpbmVhcihwaXhlbHNbYnl0ZXNQZXJQaXhlbCAqIHggKyAxICsgeSAqIGJ5dGVzUGVyUm93XSk7XG4gICAgICAgICAgICBiICs9XG4gICAgICAgICAgICAgICAgYmFzaXMgKiB1dGlsc18xLnNSR0JUb0xpbmVhcihwaXhlbHNbYnl0ZXNQZXJQaXhlbCAqIHggKyAyICsgeSAqIGJ5dGVzUGVyUm93XSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHNjYWxlID0gMSAvICh3aWR0aCAqIGhlaWdodCk7XG4gICAgcmV0dXJuIFtyICogc2NhbGUsIGcgKiBzY2FsZSwgYiAqIHNjYWxlXTtcbn07XG52YXIgZW5jb2RlREMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgcm91bmRlZFIgPSB1dGlsc18xLmxpbmVhclRvc1JHQih2YWx1ZVswXSk7XG4gICAgdmFyIHJvdW5kZWRHID0gdXRpbHNfMS5saW5lYXJUb3NSR0IodmFsdWVbMV0pO1xuICAgIHZhciByb3VuZGVkQiA9IHV0aWxzXzEubGluZWFyVG9zUkdCKHZhbHVlWzJdKTtcbiAgICByZXR1cm4gKHJvdW5kZWRSIDw8IDE2KSArIChyb3VuZGVkRyA8PCA4KSArIHJvdW5kZWRCO1xufTtcbnZhciBlbmNvZGVBQyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWF4aW11bVZhbHVlKSB7XG4gICAgdmFyIHF1YW50UiA9IE1hdGguZmxvb3IoTWF0aC5tYXgoMCwgTWF0aC5taW4oMTgsIE1hdGguZmxvb3IodXRpbHNfMS5zaWduUG93KHZhbHVlWzBdIC8gbWF4aW11bVZhbHVlLCAwLjUpICogOSArIDkuNSkpKSk7XG4gICAgdmFyIHF1YW50RyA9IE1hdGguZmxvb3IoTWF0aC5tYXgoMCwgTWF0aC5taW4oMTgsIE1hdGguZmxvb3IodXRpbHNfMS5zaWduUG93KHZhbHVlWzFdIC8gbWF4aW11bVZhbHVlLCAwLjUpICogOSArIDkuNSkpKSk7XG4gICAgdmFyIHF1YW50QiA9IE1hdGguZmxvb3IoTWF0aC5tYXgoMCwgTWF0aC5taW4oMTgsIE1hdGguZmxvb3IodXRpbHNfMS5zaWduUG93KHZhbHVlWzJdIC8gbWF4aW11bVZhbHVlLCAwLjUpICogOSArIDkuNSkpKSk7XG4gICAgcmV0dXJuIHF1YW50UiAqIDE5ICogMTkgKyBxdWFudEcgKiAxOSArIHF1YW50Qjtcbn07XG52YXIgZW5jb2RlID0gZnVuY3Rpb24gKHBpeGVscywgd2lkdGgsIGhlaWdodCwgY29tcG9uZW50WCwgY29tcG9uZW50WSkge1xuICAgIGlmIChjb21wb25lbnRYIDwgMSB8fCBjb21wb25lbnRYID4gOSB8fCBjb21wb25lbnRZIDwgMSB8fCBjb21wb25lbnRZID4gOSkge1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JfMS5WYWxpZGF0aW9uRXJyb3IoXCJCbHVySGFzaCBtdXN0IGhhdmUgYmV0d2VlbiAxIGFuZCA5IGNvbXBvbmVudHNcIik7XG4gICAgfVxuICAgIGlmICh3aWR0aCAqIGhlaWdodCAqIDQgIT09IHBpeGVscy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9yXzEuVmFsaWRhdGlvbkVycm9yKFwiV2lkdGggYW5kIGhlaWdodCBtdXN0IG1hdGNoIHRoZSBwaXhlbHMgYXJyYXlcIik7XG4gICAgfVxuICAgIHZhciBmYWN0b3JzID0gW107XG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoeSkge1xuICAgICAgICB2YXIgX2xvb3BfMiA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB2YXIgbm9ybWFsaXNhdGlvbiA9IHggPT0gMCAmJiB5ID09IDAgPyAxIDogMjtcbiAgICAgICAgICAgIHZhciBmYWN0b3IgPSBtdWx0aXBseUJhc2lzRnVuY3Rpb24ocGl4ZWxzLCB3aWR0aCwgaGVpZ2h0LCBmdW5jdGlvbiAoaSwgaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxpc2F0aW9uICpcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5jb3MoKE1hdGguUEkgKiB4ICogaSkgLyB3aWR0aCkgKlxuICAgICAgICAgICAgICAgICAgICBNYXRoLmNvcygoTWF0aC5QSSAqIHkgKiBqKSAvIGhlaWdodCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZhY3RvcnMucHVzaChmYWN0b3IpO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGNvbXBvbmVudFg7IHgrKykge1xuICAgICAgICAgICAgX2xvb3BfMih4KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBjb21wb25lbnRZOyB5KyspIHtcbiAgICAgICAgX2xvb3BfMSh5KTtcbiAgICB9XG4gICAgdmFyIGRjID0gZmFjdG9yc1swXTtcbiAgICB2YXIgYWMgPSBmYWN0b3JzLnNsaWNlKDEpO1xuICAgIHZhciBoYXNoID0gXCJcIjtcbiAgICB2YXIgc2l6ZUZsYWcgPSBjb21wb25lbnRYIC0gMSArIChjb21wb25lbnRZIC0gMSkgKiA5O1xuICAgIGhhc2ggKz0gYmFzZTgzXzEuZW5jb2RlODMoc2l6ZUZsYWcsIDEpO1xuICAgIHZhciBtYXhpbXVtVmFsdWU7XG4gICAgaWYgKGFjLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGFjdHVhbE1heGltdW1WYWx1ZSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGFjLm1hcChmdW5jdGlvbiAodmFsKSB7IHJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLCB2YWwpOyB9KSk7XG4gICAgICAgIHZhciBxdWFudGlzZWRNYXhpbXVtVmFsdWUgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIE1hdGgubWluKDgyLCBNYXRoLmZsb29yKGFjdHVhbE1heGltdW1WYWx1ZSAqIDE2NiAtIDAuNSkpKSk7XG4gICAgICAgIG1heGltdW1WYWx1ZSA9IChxdWFudGlzZWRNYXhpbXVtVmFsdWUgKyAxKSAvIDE2NjtcbiAgICAgICAgaGFzaCArPSBiYXNlODNfMS5lbmNvZGU4MyhxdWFudGlzZWRNYXhpbXVtVmFsdWUsIDEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWF4aW11bVZhbHVlID0gMTtcbiAgICAgICAgaGFzaCArPSBiYXNlODNfMS5lbmNvZGU4MygwLCAxKTtcbiAgICB9XG4gICAgaGFzaCArPSBiYXNlODNfMS5lbmNvZGU4MyhlbmNvZGVEQyhkYyksIDQpO1xuICAgIGFjLmZvckVhY2goZnVuY3Rpb24gKGZhY3Rvcikge1xuICAgICAgICBoYXNoICs9IGJhc2U4M18xLmVuY29kZTgzKGVuY29kZUFDKGZhY3RvciwgbWF4aW11bVZhbHVlKSwgMik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGhhc2g7XG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gZW5jb2RlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW5jb2RlLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdGlvbkVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWYWxpZGF0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiVmFsaWRhdGlvbkVycm9yXCI7XG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBWYWxpZGF0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnRzLlZhbGlkYXRpb25FcnJvciA9IFZhbGlkYXRpb25FcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9yLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBkZWNvZGVfMSA9IHJlcXVpcmUoXCIuL2RlY29kZVwiKTtcbmV4cG9ydHMuZGVjb2RlID0gZGVjb2RlXzEuZGVmYXVsdDtcbmV4cG9ydHMuaXNCbHVyaGFzaFZhbGlkID0gZGVjb2RlXzEuaXNCbHVyaGFzaFZhbGlkO1xudmFyIGVuY29kZV8xID0gcmVxdWlyZShcIi4vZW5jb2RlXCIpO1xuZXhwb3J0cy5lbmNvZGUgPSBlbmNvZGVfMS5kZWZhdWx0O1xuX19leHBvcnQocmVxdWlyZShcIi4vZXJyb3JcIikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnNSR0JUb0xpbmVhciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciB2ID0gdmFsdWUgLyAyNTU7XG4gICAgaWYgKHYgPD0gMC4wNDA0NSkge1xuICAgICAgICByZXR1cm4gdiAvIDEyLjkyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KCh2ICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XG4gICAgfVxufTtcbmV4cG9ydHMubGluZWFyVG9zUkdCID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIHYgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2YWx1ZSkpO1xuICAgIGlmICh2IDw9IDAuMDAzMTMwOCkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2ICogMTIuOTIgKiAyNTUgKyAwLjUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKDEuMDU1ICogTWF0aC5wb3codiwgMSAvIDIuNCkgLSAwLjA1NSkgKiAyNTUgKyAwLjUpO1xuICAgIH1cbn07XG5leHBvcnRzLnNpZ24gPSBmdW5jdGlvbiAobikgeyByZXR1cm4gKG4gPCAwID8gLTEgOiAxKTsgfTtcbmV4cG9ydHMuc2lnblBvdyA9IGZ1bmN0aW9uICh2YWwsIGV4cCkge1xuICAgIHJldHVybiBleHBvcnRzLnNpZ24odmFsKSAqIE1hdGgucG93KE1hdGguYWJzKHZhbCksIGV4cCk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIiwiLy8gc291cmNlOiBodHRwczovL3N0YWNrYmxpdHouY29tL2VkaXQvcG9jLWJsdXJoYXNoLXdlYndvcmtlcj9maWxlPWJsdXJoYXNoRGVjb2Rlci53b3JrZXIuanMsaW5kZXguanNcbmltcG9ydCB7IGRlY29kZSB9IGZyb20gJ2JsdXJoYXNoJztcblxuY29uc3Qgd2Vha0NhbnZhc1N0b3JlID0ge31cblxuc2VsZi5vbm1lc3NhZ2UgPSBhc3luYyAoeyBkYXRhIH0pID0+IHtcbiAgICBsZXQge1xuICAgICAgICBoYXNoLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0LFxuICAgICAgICB4Q291bnQsXG4gICAgICAgIHlDb3VudCxcbiAgICAgICAgcHVuY2gsXG4gICAgICAgIGlkXG4gICAgfSA9IGRhdGE7XG5cbiAgICAvLyBjb25zb2xlLnRpbWUoJ29mZnNjcmVlbiBjYW52YXMnKVxuXG4gICAgaWYgKGRhdGEuY2FudmFzKSB7XG4gICAgICAgIHdlYWtDYW52YXNTdG9yZVtpZF0gPSBuZXcgV2Vha1JlZihkYXRhLmNhbnZhcylcbiAgICB9XG5cbiAgICBjb25zdCBjYW52YXMgPSB3ZWFrQ2FudmFzU3RvcmVbaWRdPy5kZXJlZigpXG5cbiAgICBpZiAoIWNhbnZhcykgcmV0dXJuO1xuXG5cbiAgICBjYW52YXMud2lkdGggPSB3aWR0aCB8fCBjYW52YXMud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodCB8fCBjYW52YXMuaGVpZ2h0O1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgY29uc3QgcGl4ZWxzID0gZGVjb2RlKGhhc2gsIHhDb3VudCwgeUNvdW50LCBwdW5jaCk7XG5cbiAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKHhDb3VudCwgeUNvdW50KTtcbiAgICBpbWFnZURhdGEuZGF0YS5zZXQocGl4ZWxzKTtcblxuICAgIGNvbnN0IGltZyA9IGF3YWl0IGNyZWF0ZUltYWdlQml0bWFwKGltYWdlRGF0YSwgMCwgMCwgeENvdW50LCB5Q291bnQpXG5cbiAgICAvLyBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gdHJ1ZVxuICAgIC8vIGN0eC5pbWFnZVNtb290aGluZ1F1YWxpdHkgPSAnaGlnaCdcbiAgICAvLyBjdHguZmlsdGVyID0gYGJsdXIoNHB4KWBcbiAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxuXG4gICAgLy8gY29uc29sZS50aW1lRW5kKCdvZmZzY3JlZW4gY2FudmFzJylcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzAyKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=